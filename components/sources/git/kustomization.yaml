# DO NOT EDIT. Code generated by:
# github.com/ocurity/dracon/bin/kustomize-component-generator.

apiVersion: kustomize.config.k8s.io/v1alpha1
kind: Component
resources:
  - task.yaml
patches:
  # Add the Task to the Tekton Pipeline.
  - patch: |
      apiVersion: tekton.dev/v1beta1
      kind: Pipeline
      metadata:
        name: unused
      spec:
        workspaces:
          - name: output
          - name: ssh-directory
          - name: basic-auth
          - name: ssl-ca-directory
        tasks:
          - name: git-clone
            taskRef:
              name: git-clone
            workspaces:
              - name: output
                workspace: output
              - name: ssh-directory
                workspace: ssh-directory
              - name: basic-auth
                workspace: basic-auth
              - name: ssl-ca-directory
                workspace: ssl-ca-directory
            params:
              - name: git-clone-url
                value: $(params.git-clone-url)
              - name: git-clone-revision
                value: $(params.git-clone-revision)
              - name: git-clone-refspec
                value: $(params.git-clone-refspec)
              - name: git-clone-submodules
                value: $(params.git-clone-submodules)
              - name: git-clone-depth
                value: $(params.git-clone-depth)
              - name: git-clone-sslVerify
                value: $(params.git-clone-sslVerify)
              - name: git-clone-subdirectory
                value: $(params.git-clone-subdirectory)
              - name: git-clone-sparseCheckoutDirectories
                value: $(params.git-clone-sparseCheckoutDirectories)
              - name: git-clone-deleteExisting
                value: $(params.git-clone-deleteExisting)
              - name: git-clone-httpProxy
                value: $(params.git-clone-httpProxy)
              - name: git-clone-httpsProxy
                value: $(params.git-clone-httpsProxy)
              - name: git-clone-noProxy
                value: $(params.git-clone-noProxy)
              - name: git-clone-verbose
                value: $(params.git-clone-verbose)
              - name: git-clone-gitInitImage
                value: $(params.git-clone-gitInitImage)
              - name: git-clone-userHome
                value: $(params.git-clone-userHome)
        params:
          - name: git-clone-url
            description: Repository URL to clone from.
            type: string
          - name: git-clone-revision
            description: Revision to checkout. (branch, tag, sha, ref, etc...)
            type: string
            default: ""
          - name: git-clone-refspec
            description: Refspec to fetch before checking out revision.
            type: string
            default: ""
          - name: git-clone-submodules
            description: Initialize and fetch git submodules.
            type: string
            default: "true"
          - name: git-clone-depth
            description: Perform a shallow clone, fetching only the most recent N commits.
            type: string
            default: "1"
          - name: git-clone-sslVerify
            description: Set the `http.sslVerify` global git config. Setting this to `false` is not advised unless you are sure that you trust your git remote.
            type: string
            default: "true"
          - name: git-clone-subdirectory
            description: Subdirectory inside the `output` Workspace to clone the repo into.
            type: string
            default: ""
          - name: git-clone-sparseCheckoutDirectories
            description: Define the directory patterns to match or exclude when performing a sparse checkout.
            type: string
            default: ""
          - name: git-clone-deleteExisting
            description: Clean out the contents of the destination directory if it already exists before cloning.
            type: string
            default: "true"
          - name: git-clone-httpProxy
            description: HTTP proxy server for non-SSL requests.
            type: string
            default: ""
          - name: git-clone-httpsProxy
            description: HTTPS proxy server for SSL requests.
            type: string
            default: ""
          - name: git-clone-noProxy
            description: Opt out of proxying HTTP/HTTPS requests.
            type: string
            default: ""
          - name: git-clone-verbose
            description: Log the commands that are executed during `git-clone`'s operation.
            type: string
            default: "true"
          - name: git-clone-gitInitImage
            description: The image providing the git-init binary that this Task runs.
            type: string
            default: gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/git-init:v0.29.0
          - name: git-clone-userHome
            description: |
              Absolute path to the user's home directory. Set this explicitly if you are running the image as a non-root user or have overridden
              the gitInitImage param with an image containing custom user configuration.
            type: string
            default: /tekton/home
    target:
      kind: Pipeline
  # Add anchors to Task.
  - patch: |
      apiVersion: tekton.dev/v1beta1
      kind: Task
      metadata:
        name: git-clone
        labels:
          app.kubernetes.io/version: "0.6"
          v1.dracon.ocurity.com/component: source
      spec:
        params:
          - name: anchors
            type: array
            description: A list of tasks that this task depends on using their anchors.
            default: []
        results:
          - name: anchor
            description: An anchor to allow other tasks to depend on this task.
        steps:
          - name: anchor
            image: docker.io/busybox:1.35.0
            script: echo "$(context.task.name)" > "$(results.anchor.path)"
    target:
      kind: Task
      name: git-clone
